<!DOCTYPE html>

<script src="https://apis.google.com/js/api.js"></script>
<script>
  function authenticate() {
    return gapi.auth2.getAuthInstance()
        .signIn({scope: "https://www.googleapis.com/auth/youtube.readonly"})
        .then(function() { console.log("Sign-in successful"); },
              function(err) { console.error("Error signing in", err); });
  }
  function loadClient() {
    gapi.client.setApiKey("AIzaSyBVKH8DSmODCJm6CKbxAiz0YIV3hkTpONk");
    return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
        .then(function() { console.log("GAPI client loaded for API"); },
              function(err) { console.error("Error loading GAPI client for API", err); });
  }

  // Make sure the client is loaded and sign-in is complete before calling this method.
  function reload() {
    return gapi.client.youtube.subscriptions.list({
      "part": [
        "snippet"
      ],
      "mine": true,
      "maxResults": 50
    })
        .then(function(subscriptions) {
                // Handle the results here (response.result has the parsed body).
                console.log("Subscriptions", subscriptions);
                for (let i = 0; i < 8; i++) {
                  document.getElementById("video" + (i + 1)).src = subscriptions.result.items[i].snippet.thumbnails.default.url;
                };
                return gapi.client.youtube.channels.list({
                  "part": [
                    "snippet"
                  ],
                  "id": [
                    subscriptions.result.items[0].snippet.resourceId.channelId
                  ]
                })
                    .then(function(channel) {
                      console.log("Channel", channel.result.items[0].snippet.title)
                    })
              });
  }
  gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: "547349998864-9jhkb7um6b7nbjdb747j4uqduqapk39g.apps.googleusercontent.com"});
  });
</script>

<html>
<title>Subscription Scroller</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

<div class="w3-top">
  <div class="w3-bar w3-white w3-wide w3-padding w3-card">
    <a href="index.html" class="w3-bar-item w3-button">Subscription Scroller</b></a>
  </div>
</div>

<div class="w3-content w3-padding" style="max-width:1564px">

  <div class="w3-container w3-padding-32" id="topics">
    <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">Load Videos</h3>
  </div>

  <button onclick="authenticate().then(loadClient)">Log In</button>
  <button onclick="reload()">Reload</button>

</div>

<div class="w3-content w3-padding" style="max-width:1564px">

  <div class="w3-container w3-padding-32" id="topics">
    <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">Subscription Feed</h3>
  </div>

  <div class="w3-row-padding">
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 1</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video1" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 2</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video2" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 3</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video3" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 4</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video4" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
 </div>

  <div class="w3-row-padding">
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 5</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video5" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 6</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video6" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 7</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video7" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
    <div class="w3-col l3 m6 w3-margin-bottom">
      <div class="w3-display-container">
        <div class="w3-display-topleft w3-black w3-padding">Video 8</div>
        <a href="https://www.youtube.com/watch?v=2My-iWGfIs0&ab_channel=veritones"><img id="video8" src="youtube.png" style="width:100%"></a>
      </div>
    </div>
  </div>

</div>

<footer class="w3-center w3-black w3-padding-16">
  <p>Created by Michael Yin, code available on <a href="https://github.com/MichaelYinGH/subscription-scroller">GitHub</a>.
  Questions or suggestions? You can reach me by email at <a href="mailto:michaelyin2018@gmail.com">michaelyin2018@gmail.com</a>.</p>
</footer>

</body>
</html>